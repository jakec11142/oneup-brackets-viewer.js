/**
 * Immediate viewport fixes - include after main style.scss
 *
 * Fixes zoom inconsistencies and provides stable viewport behavior
 */

.brackets-viewer {
  // 1. Fixed viewport height for predictable scrolling
  height: 80vh;
  max-height: 800px;
  min-height: 400px;

  // 2. Ensure container doesn't overflow page width
  max-width: calc(100vw - 40px); // Account for padding

  // 3. Improved scroll behavior
  overflow: auto;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;

  // 4. Prevent zoom layout shifts
  zoom: 1;
  transform-origin: top left;

  // 5. Box model fix for consistent sizing
  box-sizing: border-box;

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }
}

// Fix match positioning to be zoom-safe
.brackets-viewer .elimination .match {
  // Remove reliance on absolute positioning for zoom stability
  position: relative !important;

  // Ensure consistent sizing regardless of zoom
  flex-shrink: 0;
  flex-grow: 0;
}

// Make connectors zoom-aware
.brackets-viewer .bracket-connectors {
  // Scale SVG with zoom
  transform-origin: top left;
  will-change: transform;
}

// Responsive but zoom-stable breakpoints
@media screen and (max-width: 900px) {
  .brackets-viewer {
    height: 70vh; // Slightly smaller on tablets
  }
}

@media screen and (max-width: 600px) {
  .brackets-viewer {
    height: 60vh; // Even smaller on mobile
    padding: 10px; // Reduce padding
  }
}

// High-DPI / Zoom detection
@media (-webkit-min-device-pixel-ratio: 1.5),
       (min-resolution: 144dpi) {
  .brackets-viewer {
    // Adjust spacing for high zoom/DPI
    --bv-match-horizontal-padding: 6px;
    --bv-match-vertical-padding: 4px;
  }
}

// Print styles (bonus)
@media print {
  .brackets-viewer {
    height: auto !important;
    overflow: visible !important;
    max-width: 100% !important;
  }
}